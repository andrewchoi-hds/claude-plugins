# TIL (Today I Learned)

---

## 2026-01-15

### Fresh UI 스킬 개발

#### 1. AI 디자인의 "뻔함" 문제 정의

AI가 생성하는 UI가 비슷비슷한 이유: 학습 데이터의 "평균"을 따라감.

**피해야 할 패턴 예시:**
- 파란 그라데이션 (#3B82F6 → #1D4ED8)
- 모든 것 중앙 정렬
- shadow-lg + rounded-2xl 남발
- Inter 폰트 16px 균일

**핵심**: "좋은 디자인"보다 "뻔한 것 회피"로 프레임을 잡으니 목표가 명확해짐.

#### 2. 3축 레벨 시스템 설계

단순 on/off가 아닌 스펙트럼 기반 조절:

| 축 | 설명 |
|----|------|
| 안정성 | UX 안전, 익숙한 패턴 |
| 개성 | 흔한 선택 회피, 차별화 |
| 실험적 | 파격적 시도, 예상 밖 |

4단계 레벨로 매핑:
- common (90/30/10) - 프로덕션
- balance (60/50/40) - 일반 (기본값)
- rare (40/80/60) - 포트폴리오
- unique (20/90/90) - 실험작

#### 3. 자연어 트리거 → 레벨 매핑

사용자가 명시적으로 레벨 지정 없이 자연어에서 의도 추출:

```
"독특하게 만들어줘" → rare (독특, 개성, 남다르게 감지)
"실험적으로"       → unique (실험, 과감, 파격 감지)
"기본적으로"       → common (기본, 평범, 안전 감지)
```

**효과**: 레벨 번호 외울 필요 없이 자연스럽게 사용.

#### 4. 단일 스킬, 다중 모드 패턴

`/ui-common`, `/ui-rare` 분리 대신 하나의 `/ui`에서 트리거로 분기:

```json
"triggers": [
  "== 레벨: rare ==",
  "독특하게 만들어",
  "개성있는 UI",
  ...
]
```

**효과**: 명령어 외울 필요 없음, 유지보수 용이.

#### 5. 문서 = 실행 가능한 프롬프트

`.claude/commands/ui.md` 파일이 그대로 실행 시 프롬프트가 됨.

피할 패턴 목록을 마크다운 테이블로 작성 → Claude가 읽고 회피.

**효과**: 코드 로직 없이 문서 기반 동작 제어, 수정/확장 용이.

#### 6. 플러그인 확장 패턴

단일 스킬 → 멀티 스킬 플러그인으로 확장:

```
session-wrap (단일)
     ↓
claude-plugins (멀티)
├── /wrap
└── /ui
```

settings.json에서 플러그인 이름과 description만 변경하면 됨.

---

### 효과적이었던 패턴

| 패턴 | 효과 |
|------|------|
| 문제 역순 설계 | "뻔함" 정의 → 피할 목록 → 레벨 시스템 |
| 점진적 강도 조절 | common(20%) → unique(거의 전부) |
| 레벨별 용도 명시 | 언제 쓸지 명확 (프로덕션 vs 실험작) |
| 트리거 섹션 주석 | `== 레벨: rare ==`로 구조화 |

---

### 실수와 교훈

| 실수 | 교훈 |
|------|------|
| "좋은 디자인"으로 접근 | "뻔한 것 회피"가 더 명확 |
| 레벨을 숫자로 표현 | 의미있는 이름이 더 직관적 |

---

## 2026-01-13

### 1. Claude Code 플러그인 시스템 제약

**발견**: Claude Code는 런타임 코드 실행 불가. JavaScript/Python으로 동적 로직 구현 불가.

**해결**: 프롬프트 기반 에이전트 설계. 마크다운 파일과 settings.json만으로 모든 기능 구현.

### 2. 언어 태그 패턴 (`[LANG: ko/en]`)

**방법**: 프롬프트에 `[LANG: ko]` 또는 `[LANG: en]` 태그 추가하여 에이전트 출력 언어 제어.

```markdown
프롬프트의 언어 태그에 따라 출력:
- `[LANG: ko]` → 한국어 출력
- `[LANG: en]` → English output
```

**효과**: 런타임 조건문 없이 다국어 지원.

### 3. 트리거 확장 전략 (24개 → 65개+)

한국어 트리거의 3가지 확장 축:

| 축 | 변형 예시 |
|---|----------|
| 띄어쓰기 | 세션정리 ↔ 세션 정리 |
| 어미 | 정리하자 / 정리할까 / 정리해줘 |
| 존댓말 | 해줘 ↔ 해주세요 |

**핵심**: 사용자 인지 부담 감소, 자연어 커버리지 증가.

### 4. 테이블 기반 출력 형식

**Before**:
```markdown
- [섹션]: [내용] — [이유]
```

**After**:
```markdown
| 항목 | 내용 |
|------|------|
| **추가할 내용** | [구체적인 내용] |
| **근거** | [세션에서 발견된 패턴] |
```

**효과**: 가독성 향상, 파싱 용이, 일관된 구조.

### 5. Phase 3 사용자 선택 완성

```
AskUserQuestion (multiSelect: true)
├── 커밋 생성
├── CLAUDE.md 업데이트
├── 자동화 생성
├── TIL.md 저장
└── TODO.md 저장
```

**핵심**: 사용자가 원하는 작업만 선택적으로 실행.

---

### 실수 → 수정

| 실수 | 해결 |
|------|------|
| 런타임 코드 실행 시도 | 프롬프트 기반 접근으로 전환 |
| 언어 감지 복잡한 로직 | `[LANG: tag]` 방식으로 단순화 |
| 트리거 7개만 추가 | 65개+로 확장 (변형 포함) |

---

## 2026-01-12

## Claude Code 플러그인 개발

### 1. 플러그인 디렉토리 구조

```
.claude/
├── agents/      # 에이전트 정의 (.md)
├── commands/    # 스킬/명령어 정의 (.md)
└── settings.json # 설정 (agents, skills, triggers)
```

**핵심**: `.claude/` 디렉토리가 플러그인의 루트. 파일만 만들면 안 되고 `settings.json`에 등록해야 작동함.

### 2. settings.json 이중 계층

```json
{
  "agents": {     // 에이전트 정의 (tools, description)
    "agent-name": {...}
  },
  "skills": {     // 트리거 정의 (triggers, description)
    "skill-name": {...}
  }
}
```

**핵심**: agents는 "무엇을 하는지", skills는 "언제 실행하는지" 분리.

### 3. 에이전트 Markdown 컨벤션

표준 섹션:
- `# [name] 에이전트` - 제목
- `## 목적` - 무엇을 하는지
- `## 출력 형식` - 구조화된 템플릿
- `## 사용 가능한 도구` - Read, Glob, Grep
- `## 지침` - 단계별 가이드
- `## 주의사항` - 제약사항

### 4. 한국어 트리거 확장

다양한 표현 방식 지원:
```json
"triggers": [
  "/wrap",           // 명령어
  "세션 정리",        // 기본
  "마무리해줘",       // 요청형
  "오늘은 여기까지",   // 대화형
  "랩"               // 축약
]
```

**핵심**: 사용자가 자연스럽게 말하는 모든 방식을 커버.

### 5. Phase 기반 에이전트 오케스트레이션

```
Phase 1: 병렬 실행 (독립 작업)
  ├── agent-1
  ├── agent-2
  └── agent-3

Phase 2: 순차 실행 (Phase 1 결과 필요)
  └── validator-agent

Phase 3: 사용자 인터랙션
  └── AskUserQuestion
```

**핵심**:
- 독립적 = 병렬 (효율성)
- 의존적 = 순차 (정확성)
- 최종 = 사용자 선택 (자율성)

---

## 효과적이었던 패턴

### 역할 분리
- 하나의 에이전트 = 하나의 책임
- 복잡한 작업 = 단순한 에이전트들의 조합

### 한/영 이중 언어
- description: 영어 + 한국어
- triggers: 두 언어 모두
- 출력: 한국어 우선

### 표준화된 명명
- kebab-case (doc-updater, automation-scout)
- 동사-명사 조합 (updater, extractor, checker)

---

## 피해야 할 것

1. **하나의 에이전트에 너무 많은 책임** → 역할 분리
2. **트리거 과도하게 추가** → 7-15개가 적당
3. **파일만 만들고 JSON 등록 안 함** → settings.json 확인 필수
